name: Salesforce-Deployment
description: Creating salesforce org

on: 
    push:
        branches: 
            - main

env:
                consumer-key: ${{ secrets.CONSUMER_KEY }}
                devhub: ${{ secrets.DEVHUB_USERNAME }}
        

jobs: 
    create-scratchOrg:
        environment: PROD

        runs-on: ubuntu-latest
        steps:
            - name: Print out Salesforce
              run: echo "Salesforce Scratch Org"
            - name: Check out Repo
              uses: actions/checkout@v4
            - name: Download CLi and log in
              uses: ./.github/actions
              with:
                cli-version: 'version'
            - run: echo "${{ secrets.SECRET_JWT }}" >> secret.key 
            - run: sf org login jwt --username=${{ env.devhub }}   --jwt-key-file=secret.key  --client-id=${{ env.consumer-key }} --set-default-dev-hub